# SuccessRiver AcademicCareerChart

## 概要

「SuccessRiver AcademicCareerChart」は、@rei_nariさん考案のキャリアイベント図を、研究者情報データベースresearchmapのエクスポートデータから自動生成するツールです。

本プロジェクトは、松田裕貴さん(@yukimatJP)のオリジナル版をフォークし、ユーザビリティとエクスポート機能を大幅に改善した改良版です。

## 主な機能

- **researchmap連携** researchmapのエクスポートファイル（`.jsonl`）を読み込むだけで、キャリア情報を自動で解析します。

- **高機能なキャリアチャート**
  - **論文業績**: 著者の役割（筆頭かつ責任／筆頭のみ／責任のみ／共著）を4つの色で明確に区別して表示します。
  - **研究費・経歴**: 獲得した研究費や学歴・職歴を、重複があっても見やすいタイムライン形式で可視化します。

- **柔軟なカスタマイズ**
  - チャートの表示幅をスライダーで直感的に調整できます。
  - 論文の種類や代表者以外の予算など、項目ごとに表示のON/OFFを切り替え可能です。
  - テキストの表示方法を「ホバー時のみ」と「常時表示」から選択できます。
  - **高さ自動調整**: 「常時表示」モードでは、テキストの長さに応じてバーの高さが自動的に調整され、全文を確実に表示します。

- **完璧なエクスポート機能**
  - **スタンドアロンHTML**: メイン画面の見た目を**完全に再現**した、単一のHTMLファイルを生成し、ダウンロードできます。このファイルは単体で動作するため、共有や保管が容易です。
  - **印刷プレビュー**: 印刷に最適化された、見たままのチャートを新しいタブで表示します。ブラウザの印刷機能で、そのままPDF化や紙への印刷が可能です。
  - **iframe埋め込み**: 生成されたコードをコピーするだけで、ご自身のウェブサイトやブログに簡単にチャートを埋込めます。

## オリジナルからの主な改善点

- **見た目の完全再現**: スタンドアロンHTML生成および印刷機能において、メイン画面のチャートデザイン（色、幅、テキスト表示など）を忠実に再現するように刷新しました。

- **UI/UXの改善**:
  - 「常時表示」モードでのテキスト量に応じた動的な高さ調整機能を復活させ、安定動作するように改善しました。
  - より多くの人が情報を識別しやすい、カラーブラインドセーフな配色を採用しました。

- **情報表示の充実**: 学歴・職歴（所属・部署・職種）、研究費（助成機関・カテゴリ）の情報をより詳細に表示できるように改善しました。

- **プライバシー保護**: 埋め込みコードからローカルファイルパス情報が漏れる可能性を排除し、安全な相対パス方式を採用しました。

## 使用方法

### 1. researchmapデータの準備

1. researchmapにログインします。
2. 画面右上のメニューから「データのエクスポート」を選択し、**JSONL形式**でデータをダウンロードします。

### 2. 実行

1. この`career-chart.html`をブラウザで開きます。
2. 「ファイルを選択」ボタンを押し、先ほどダウンロードした`.jsonl`ファイルを選択します。
3. チャートが自動的に生成・表示されます。

### 3. 設定調整

- 「表示オプション」セクションで、チャートの横幅や表示項目などを好みに合わせて調整します。変更は即座に反映されます。

### 4. エクスポートと共有

- **スタンドアロンHTMLを生成**: チャートを単一のHTMLファイルとしてダウンロードします。
- **埋め込みコード(iframe)**: 自身のサイトに埋め込むための`<iframe>`コードを生成します。
- **印刷プレビュー**: 印刷に最適化された表示を新しいタブで開きます。

## 色分け仕様 (著者タイプ)

| 著者タイプ | 色・Hexコード | 重要度 |
|---|---|---|
| 筆頭著者かつ責任著者 | 🔴 濃い赤 (`#d73027`) | 最高 |
| 筆頭著者のみ | 🟠 オレンジ (`#fc8d62`) | 高 |
| 責任著者のみ | 🔵 青 (`#8da0cb`) | 中 |
| その他共著者 | 🟣 薄いピンク (`#e78ac3`) | 低 |

## 更新履歴

- **v2.0.0 (2025/06/13)**
  - エクスポート機能を刷新。「スタンドアロンHTML生成」および「印刷プレビュー」で、メイン画面の見た目を完全に再現するように変更。
  - コードベースを全体的にリファクタリングし、保守性を向上。

- **v1.0.x (旧バージョン)**
  - フォーク版の初期開発。カラーブラインドセーフ対応、テキスト見切れ問題の修正、各種情報表示の改善などを実施。

## クレジット・謝辞

- **オリジナル開発者**: 松田裕貴 (@yukimatJP)
- **キャリアイベント図考案**: @rei_nariさん
- **改良版開発**: 多田塁：Rui Tada
- **オリジナルプロジェクト**: SuccessRiverAcademicCareerChartJS
